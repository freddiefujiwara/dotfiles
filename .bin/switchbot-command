#!/bin/bash
SCRIPT_DIR=$(cd "$(dirname "$0")" && pwd)
. "$SCRIPT_DIR/switchbot-common"

while getopts d:c: option; do
  case "${option}" in
    d) deviceid=${OPTARG} ;;
    c) com=${OPTARG} ;;
  esac
done
[[ -z ${deviceid:-} || -z ${com:-} ]] && { echo "Usage $0 -d <deviceid> -c <command>"; exit 1; }
command=$(printf '{"command": "%s","parameter": "default","commandType": "command"}' "$com")
switchbot_post "/devices/${deviceid}/commands" "${command}" | jq
